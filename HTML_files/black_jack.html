<!DOCTYPE html>
<html>

<head>
    <title> BLACK JACK </title>
</head>

<body onload="startGame()">
    <p>Wanna draw another card?</p>
    <button onclick="choose('yes')">YES</button>
    <button onclick="choose('no')">NO</button>
    <!-- 1 is for 'yes', 0 is for 'no' -->

    <p>Your Hand:</p>
    <p id="hand"></p>
    <p id="test" onclick="die()">hey</p>

</body>

</html>

<script>

    var my_cards = ["test"]

    async function startGame() {
        draw_card();
        draw_card();
    }

    function choose(choice) {
        console.log('Hello World', choice);
        if (choice == 'yes') {
            draw_card();
        }
        else
        {
            fetch("/games/black_jack/fold")
                .then(response => response.json())
                .then(data => { console.log(data.card) });
        }
    }

    function die() {
        document.getElementById("test").style.display = 'none';
    }

    // GETs and uploads the new card. Doesn't check game rules.
    async function draw_card()
    {
        response = await fetch("/games/black_jack/draw");
        json = await response.json();
        my_cards.push(json.card);
        document.getElementById("hand").innerHTML = my_cards.toString();
    }

</script>