<html>

<head>
    <title>
        Wheel of fortune
    </title>
</head>

<body onload="start()">
    <h1>Welcome to the wheel of fortune</h1>





    <!--  <form action="/games/wheel_of_fortune/spin_wheel">  
    -->
    <label for="bet_percentage">Choose the percentage of your money you would like to bet:<br></label>
    <button onclick="open_rules()" id="open">open rules</button>
    <button onclick="close_rules()" id="close">close rules</button>
    <p id="text">Spinning the wheel will cost you 5 coins. You will recieve back a random amount of coins between 0 and
        10. Good luck!</p><br><br>
    <select name="bet_percentage" id="bet_percentage">
        <option value="1">1%</option>
        <option value="5">5%</option>
        <option value="10">10%</option>
        <option value="20">20%</option>
        <option value="30">30%</option>
        <option value="40">40%</option>
        <option value="50">50%</option>
        <option value="60">60%</option>
        <option value="70">70%</option>
        <option value="80">80%</option>
        <option value="90">90%</option>
        <option value="100">100%</option>

    </select>
    <!-- <input type="submit" value="spin the wheel!"> -->
    <!-- </form> -->




    <button onclick="spin_wheel()" id="spin">spin the wheel!</button>
    <p id="prize_text"></p>
    <p id="current_coins_text"></p>


</body>
<script>
    //var RULES_MESSAGE = "The rules of the game are blaa blaa blaaaaaaaaaaa";
    function start() {
        document.getElementById('open').style.display = "inline"
        document.getElementById('close').style.display = "none"
        document.getElementById('text').style.display = "none"
    }
    function open_rules() {
        document.getElementById('open').style.display = 'none'
        document.getElementById('close').style.display = 'inline'
        document.getElementById('text').style.display = 'inline'

    }

    function close_rules() {
        document.getElementById('open').style.display = 'inline'
        document.getElementById('close').style.display = 'none'
        document.getElementById('text').style.display = 'none'
    }



    async function spin_wheel() {
        bet_percentage = document.getElementById('bet_percentage').value
        //console.log(bet_percentage)
        response = await fetch("/games/wheel_of_fortune/spin_wheel/" + bet_percentage);
        json = await response.json();

        prize = json.prize
        coins = json.coins
        document.getElementById('prize_text').innerHTML = 'Your prize is ' + prize + " coins"
        document.getElementById('current_coins_text').innerHTML = 'You currently have a total of ' + coins + " coins"


    }

</script>

</html>